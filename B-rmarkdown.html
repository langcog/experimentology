<!DOCTYPE html>
<html lang xmlLang><head><link rel="stylesheet" type="text/css" href="/assets/static/index.page.client.425ab545.css"><link rel="preload" href="/assets/static/SourceSansPro-Regular.71d10a86.ttf" as="font" type="font/ttf" crossorigin><meta charSet="utf-8"/><meta name="generator" content="pandoc"/><meta name="viewport" content="width=device-width, initial-scale=1"/><meta property="og:title" content="B R Markdown | Experimentology"/><meta property="og:type" content="book"/><meta name="author" content="Michael C. Frank, Mika Braginsky, Julie Cachia, Nicholas Coles, Tom Hardwicke, Robert Hawkins, Maya Mathur, and Rondeline Williams"/><script type="text/x-mathjax-config">
MathJax.Hub.Config({
  TeX: { equationNumbers: { autoNumber: "AMS" } }
});
</script><script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script><meta name="description" content="B R Markdown | Experimentology"/><title>B R Markdown | Experimentology</title><link href="libs/tufte-css-2015.12.29/tufte-fonts.css" rel="stylesheet"/><link href="libs/tufte-css-2015.12.29/tufte-italics.css" rel="stylesheet"/><link href="libs/tufte-css-2015.12.29/tufte.css" rel="stylesheet"/><script src="libs/kePrint-0.0.1/kePrint.js"></script><link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet"/><style type="text/css">code{white-space: pre;}</style><style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style><style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style></head><body>



<div class="row">
<div class="col-sm-12">
<div island></div>
</div>
</div>
<div class="row">
<div class="col-sm-12">
<div id="rmarkdown" class="section level1" number="19">
<h1><span class="header-section-number">B</span> R Markdown</h1>
<div island></div>
<p>This is a short tutorial on using R Markdown to mix prose and code together for creating reproducible scientific documents.<label for="tufte-sn-261" class="margin-toggle sidenote-number">261</label><input type="checkbox" id="tufte-sn-261" class="margin-toggle"/><span class="sidenote"><span class="sidenote-number">261</span> This appendix is adapted from a tutorial that Mike Frank and Chris Hartgerink taught together at SIPS 2017.</span></p>
<p>In short: R Markdown allows you to create documents that are compiled with code, producing your next scientific paper. This tutorial will help you learn the nuts and bolts of how to do this. This appendix – actually this whole book – is written in R Markdown. It’s a very flexible platform for writing nice looking documents.<label for="tufte-sn-262" class="margin-toggle sidenote-number">262</label><input type="checkbox" id="tufte-sn-262" class="margin-toggle"/><span class="sidenote"><span class="sidenote-number">262</span> If you’re interested in the source code for this tutorial, it’s available <a href="https://github.com/langcog/experimentology/blob/master/101-rmarkdown.Rmd">here</a>. We use the amazing <code>bookdown</code> package to format multi-chapter manuscripts, and we use the <code>tufte</code> package (lightly customized) for style.</span></p>
<div id="getting-started" class="section level2" number="19.1">
<h2><span class="header-section-number">B.1</span> Getting Started</h2>
<p>Fire up Rstudio and create a new R Markdown file. Don’t worry about the settings, we’ll get to that later.</p>
<p>If you click on “Knit” (or hit <code>CTRL+SHIFT+K</code>) the R Markdown file will run and generate all results and present you with a PDF file, HTML file, or a Word file. If RStudio requests you to install packages, click yes and see whether everything works to begin with.</p>
<p>We need that before we teach you more about R Markdown. But you should feel good if you get here already, because honestly, you’re about 80% of the way to being able to write basic R Markdown files. It’s <em>that</em> easy.</p>
<div island></div>
</div>
<div id="structure-of-an-r-markdown-file" class="section level2" number="19.2">
<h2><span class="header-section-number">B.2</span> Structure of an R Markdown file</h2>
<p>An R Markdown file contains several parts. Most essential are the header, the body text, and code chunks. When you knit the resulting document, you will get the output – text combined with the results of running the core – in one of a number of output formats.</p>
<div id="header" class="section level3" number="19.2.1">
<h3><span class="header-section-number">B.2.1</span> Header</h3>
<p>Headers in R Markdown files contain some metadata about your document, which you can customize to your liking. Below is a simple example that purely states the title, author name(s), date, and output format.<label for="tufte-sn-263" class="margin-toggle sidenote-number">263</label><input type="checkbox" id="tufte-sn-263" class="margin-toggle"/><span class="sidenote"><span class="sidenote-number">263</span> The header is written in “YAML”, which means “yet another markup language.” You don’t need to know that, and don’t worry about it. Just make sure you are careful with indenting, as YAML does care about that.</span></p>
<div class="sourceCode" id="cb48"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb48-1"><a href="B-rmarkdown.html#cb48-1" aria-hidden="true" tabIndex="-1"></a><span class="pp">---</span></span>
<span id="cb48-2"><a href="B-rmarkdown.html#cb48-2" aria-hidden="true" tabIndex="-1"></a><span class="fu">title</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;Untitled&quot;</span></span>
<span id="cb48-3"><a href="B-rmarkdown.html#cb48-3" aria-hidden="true" tabIndex="-1"></a><span class="fu">author</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;NAME&quot;</span></span>
<span id="cb48-4"><a href="B-rmarkdown.html#cb48-4" aria-hidden="true" tabIndex="-1"></a><span class="fu">date</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;July 28, 2017&quot;</span></span>
<span id="cb48-5"><a href="B-rmarkdown.html#cb48-5" aria-hidden="true" tabIndex="-1"></a><span class="fu">output</span><span class="kw">:</span><span class="at"> html_document</span></span>
<span id="cb48-6"><a href="B-rmarkdown.html#cb48-6" aria-hidden="true" tabIndex="-1"></a><span class="pp">---</span></span></code></pre></div>

</div>
<div id="body-text" class="section level3" number="19.2.2">
<h3><span class="header-section-number">B.2.2</span> Body text</h3>
<p>The body of the document is where you actually write your reports. This is primarily written in the Markdown format, which is explained in the <a href="B-rmarkdown.html#markdown-syntax">Markdown syntax</a> section.</p>
<p>The beauty of R Markdown is, however, that you can evaluate <code>R</code> code right in the text. To do this, you start inline code with `r, type the code you want to run, and close it again with a `. Usually, this key is below the escape (<code>ESC</code>) key or next to the left SHIFT button.</p>
<p>For example, if you want to have the result of 48 times 35 in your text, you type ` r 48-35`, which returns 13. Please note that if you return a value with many decimals, it will also print these depending on your settings (for example, 3.1415927).</p>
</div>
<div id="code-chunks" class="section level3" number="19.2.3">
<h3><span class="header-section-number">B.2.3</span> Code chunks</h3>
<p>In the section above we introduced you to running code inside text, but often you need to take several steps in order to get to the result you need. And you don’t want to do data cleaning in the text! This is why there are code chunks. A simple example is a code chunk loading packages.</p>
<p>First, insert a code chunk by going to <code>Code->Insert code chunk</code> or by pressing <code>CTRL+ALT+I</code>. Inside this code chunk you can then type for example, <code>library(ggplot2)</code> and create an object <code>x</code>.</p>
<p>If you do not want to have the contents of the code chunk to be put into your document, you include <code>echo=FALSE</code> at the start of the code chunk. We can now use the contents from the above code chunk to print results (e.g., <span class="math inline">\(x=2\)</span>).</p>
<p>These code chunks can contain whatever you need, including tables, and figures (which we will go into more later). Note that all code chunks regard the location of the R Markdown as the working directory, so when you try to read in data use the relative path in.</p>
</div>
<div id="output-formats" class="section level3" number="19.2.4">
<h3><span class="header-section-number">B.2.4</span> Output formats</h3>
<p>By default, R Markdown renders to HTML format, the standard format of web pages. These output files are visible in the RStudio viewer and in any web-browser. These files can be shared on the web and are a great way to provide the outputs of your research to collaborators (e.g., sharing intermediate analytic results).</p>
<p>Through a program called pandoc, R Markdown can also render to Microsoft Word’s DOCX format. This functionality can be very useful for sharing editable writeups with collaborators (see below).</p>
<p>Finally, rendering to PDF is useful
If you want to create PDFs from R Markdown you need a installation on your computer. (Latex, or tex for short, is a powerful typesetting package). Many tex installations are available. One recent possibility is <a href="https://yihui.org/tinytex/">TinyTEX</a>, a minimal tex installaction made for working with R Markdown. Or if you want a full install, try <a href="https://miktex.org/">MikTeX</a> for Windows, <a href="https://tug.org/mactex/">MacTeX</a> for Mac, or <a href="https://www.tug.org/texlive/">TeX Live</a> for Linux.</p>
</div>
</div>
<div id="markdown-syntax" class="section level2" number="19.3">
<h2><span class="header-section-number">B.3</span> Markdown syntax</h2>
<p>Markdown is one of the simplest document languages around, that is an open standard and can be converted into <code>.tex</code>, <code>.docx</code>, <code>.html</code>, <code>.pdf</code>, etc. This is the main workhorse of R Markdown and is very powerful. You can <a href="https://learnxinyminutes.com/docs/markdown/">learn Markdown in five minutes</a>. Other resources include <a href="https://rmarkdown.rstudio.com/authoring_basics.html">this tutorial</a>, and <a href="https://www.rstudio.com/wp-content/uploads/2015/02/rmarkdown-cheatsheet.pdf">this cheat sheet</a>.</p>
<p>These are the basics:</p>
<ul>
<li>It’s easy to get <code>*italic*</code> or <code>**bold**</code>.</li>
<li>You can get headings using <code># heading1</code> for first level, <code>## heading2</code> for second-level, and <code>### heading3</code> for third level. Make sure you leave a space after the <code>#</code>!</li>
<li>Lists are delimited with <code>*</code> for each entry.</li>
<li>You can write links by writing <code>[here's my link](http://foo.com)</code>.</li>
</ul>
<p>The great thing about Markdown is that it works almost everywhere! Github, OSF, slack, many wikis, and even in text documents it looks pretty good.</p>
</div>
<div id="headers-graphs-and-tables" class="section level2" number="19.4">
<h2><span class="header-section-number">B.4</span> Headers, graphs, and tables</h2>
<div id="headers" class="section level3" number="19.4.1">
<h3><span class="header-section-number">B.4.1</span> Headers</h3>
<p>We’re going to want more libraries loaded (for now we’re loading them inline).</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="B-rmarkdown.html#cb49-1" aria-hidden="true" tabIndex="-1"></a><span class="fu">library</span>(knitr)</span>
<span id="cb49-2"><a href="B-rmarkdown.html#cb49-2" aria-hidden="true" tabIndex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb49-3"><a href="B-rmarkdown.html#cb49-3" aria-hidden="true" tabIndex="-1"></a><span class="fu">library</span>(broom)</span></code></pre></div>
<p>We often also add <code>chunk options</code> to each code chunk so that, for example:</p>
<ul>
<li>code does or doesn’t display inline (<code>echo</code> setting)</li>
<li>figures are shown at various sizes (<code>fig.width</code> and <code>fig.height</code> settings)</li>
<li>warnings and messages are suppressed (<code>warning</code> and <code>message</code> settings)</li>
<li>computations are cached (<code>cache</code> setting)</li>
</ul>
<p>There are many others available as well. Caching can be very helpful for large files, but can also cause problems when there are external dependencies that change. An example that is useful for manuscripts is:</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="B-rmarkdown.html#cb50-1" aria-hidden="true" tabIndex="-1"></a>opts_chunk<span class="sc">$</span><span class="fu">set</span>(<span class="at">fig.width=</span><span class="dv">8</span>, <span class="at">fig.height=</span><span class="dv">5</span>, </span>
<span id="cb50-2"><a href="B-rmarkdown.html#cb50-2" aria-hidden="true" tabIndex="-1"></a>               <span class="at">echo=</span><span class="cn">TRUE</span>, </span>
<span id="cb50-3"><a href="B-rmarkdown.html#cb50-3" aria-hidden="true" tabIndex="-1"></a>               <span class="at">warning=</span><span class="cn">FALSE</span>, <span class="at">message=</span><span class="cn">FALSE</span>, </span>
<span id="cb50-4"><a href="B-rmarkdown.html#cb50-4" aria-hidden="true" tabIndex="-1"></a>               <span class="at">cache=</span><span class="cn">TRUE</span>)</span></code></pre></div>
<div island></div>
</div>
<div id="graphs" class="section level3" number="19.4.2">
<h3><span class="header-section-number">B.4.2</span> Graphs</h3>
<p>It’s really easy to include graphs, like this one. (Using the <code>mtcars</code> dataset that comes with <code>ggplot2</code>).</p>
<p><img src="experimentology_files/figure-html/rmarkdown-ex-1.png" width="\linewidth"/></p>
<p>All you have to do is make the plot and it will render straight into the text.</p>
<p>External graphics can also be included, as follows:</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="B-rmarkdown.html#cb52-1" aria-hidden="true" tabIndex="-1"></a>knitr<span class="sc">::</span><span class="fu">include_graphics</span>(<span class="st">&quot;path/to/file&quot;</span>)</span></code></pre></div>
</div>
<div id="tables" class="section level3" number="19.4.3">
<h3><span class="header-section-number">B.4.3</span> Tables</h3>
<p>There are many ways to make good-looking tables using R Markdown, depending on your display purpose.</p>
<ul>
<li><p>The <code>knitr</code> package (which powers R Markdown) comes with the <code>kable</code> function. It’s versatile and makes perfectly reasonable tables. It also has a <code>digits</code> argument for controlling rounding.</p></li>
<li><p>For HTML tables, there is the <code>DT</code> package, which provides <code>datatable</code> – these are pretty and interactive javascript-based tables that you can click on and search in. Not great for static documents though.</p></li>
<li><p>For APA manuscripts, it can also be helpful to use the <code>xtable</code> package, which creates very flexible LaTeX tables. These can be tricky to get right but they are completely customizable provided you want to google around and learn a bit about tex.</p></li>
</ul>
<p>We recommend starting with <code>kable</code>. An expression like this:</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="B-rmarkdown.html#cb53-1" aria-hidden="true" tabIndex="-1"></a><span class="fu">kable</span>(<span class="fu">head</span>(mtcars), <span class="at">digits =</span> <span class="dv">1</span>)</span></code></pre></div>
<p>Produces tabular output like this:</p>
<table><thead><tr><th style="text-align:left;">
</th><th style="text-align:right;">
mpg
</th><th style="text-align:right;">
cyl
</th><th style="text-align:right;">
disp
</th><th style="text-align:right;">
hp
</th><th style="text-align:right;">
drat
</th><th style="text-align:right;">
wt
</th><th style="text-align:right;">
qsec
</th><th style="text-align:right;">
vs
</th><th style="text-align:right;">
am
</th><th style="text-align:right;">
gear
</th><th style="text-align:right;">
carb
</th></tr></thead><tbody><tr><td style="text-align:left;">
Mazda RX4
</td><td style="text-align:right;">
21.0
</td><td style="text-align:right;">
6
</td><td style="text-align:right;">
160
</td><td style="text-align:right;">
110
</td><td style="text-align:right;">
3.9
</td><td style="text-align:right;">
2.6
</td><td style="text-align:right;">
16.5
</td><td style="text-align:right;">
0
</td><td style="text-align:right;">
1
</td><td style="text-align:right;">
4
</td><td style="text-align:right;">
4
</td></tr><tr><td style="text-align:left;">
Mazda RX4 Wag
</td><td style="text-align:right;">
21.0
</td><td style="text-align:right;">
6
</td><td style="text-align:right;">
160
</td><td style="text-align:right;">
110
</td><td style="text-align:right;">
3.9
</td><td style="text-align:right;">
2.9
</td><td style="text-align:right;">
17.0
</td><td style="text-align:right;">
0
</td><td style="text-align:right;">
1
</td><td style="text-align:right;">
4
</td><td style="text-align:right;">
4
</td></tr><tr><td style="text-align:left;">
Datsun 710
</td><td style="text-align:right;">
22.8
</td><td style="text-align:right;">
4
</td><td style="text-align:right;">
108
</td><td style="text-align:right;">
93
</td><td style="text-align:right;">
3.9
</td><td style="text-align:right;">
2.3
</td><td style="text-align:right;">
18.6
</td><td style="text-align:right;">
1
</td><td style="text-align:right;">
1
</td><td style="text-align:right;">
4
</td><td style="text-align:right;">
1
</td></tr><tr><td style="text-align:left;">
Hornet 4 Drive
</td><td style="text-align:right;">
21.4
</td><td style="text-align:right;">
6
</td><td style="text-align:right;">
258
</td><td style="text-align:right;">
110
</td><td style="text-align:right;">
3.1
</td><td style="text-align:right;">
3.2
</td><td style="text-align:right;">
19.4
</td><td style="text-align:right;">
1
</td><td style="text-align:right;">
0
</td><td style="text-align:right;">
3
</td><td style="text-align:right;">
1
</td></tr><tr><td style="text-align:left;">
Hornet Sportabout
</td><td style="text-align:right;">
18.7
</td><td style="text-align:right;">
8
</td><td style="text-align:right;">
360
</td><td style="text-align:right;">
175
</td><td style="text-align:right;">
3.1
</td><td style="text-align:right;">
3.4
</td><td style="text-align:right;">
17.0
</td><td style="text-align:right;">
0
</td><td style="text-align:right;">
0
</td><td style="text-align:right;">
3
</td><td style="text-align:right;">
2
</td></tr><tr><td style="text-align:left;">
Valiant
</td><td style="text-align:right;">
18.1
</td><td style="text-align:right;">
6
</td><td style="text-align:right;">
225
</td><td style="text-align:right;">
105
</td><td style="text-align:right;">
2.8
</td><td style="text-align:right;">
3.5
</td><td style="text-align:right;">
20.2
</td><td style="text-align:right;">
1
</td><td style="text-align:right;">
0
</td><td style="text-align:right;">
3
</td><td style="text-align:right;">
1
</td></tr></tbody></table>
<div island></div>
</div>
<div id="statistics" class="section level3" number="19.4.4">
<h3><span class="header-section-number">B.4.4</span> Statistics</h3>
<p>It’s also really easy to include statistical tests of various types. One option is to use the <code>broom</code> package, which formats the outputs of various tests really nicely. Paired with knitr’s <code>kable</code> you can make very simple tables in just a few lines of code. This expression:</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="B-rmarkdown.html#cb54-1" aria-hidden="true" tabIndex="-1"></a>mod <span class="ot">&lt;-</span> <span class="fu">lm</span>(mpg <span class="sc">~</span> hp <span class="sc">+</span> cyl, <span class="at">data =</span> mtcars)</span>
<span id="cb54-2"><a href="B-rmarkdown.html#cb54-2" aria-hidden="true" tabIndex="-1"></a><span class="fu">kable</span>(<span class="fu">tidy</span>(mod), <span class="at">digits =</span> <span class="dv">3</span>)</span></code></pre></div>
<p>produces this output:</p>
<table><thead><tr><th style="text-align:left;">
term
</th><th style="text-align:right;">
estimate
</th><th style="text-align:right;">
std.error
</th><th style="text-align:right;">
statistic
</th><th style="text-align:right;">
p.value
</th></tr></thead><tbody><tr><td style="text-align:left;">
(Intercept)
</td><td style="text-align:right;">
36.908
</td><td style="text-align:right;">
2.191
</td><td style="text-align:right;">
16.847
</td><td style="text-align:right;">
0.000
</td></tr><tr><td style="text-align:left;">
hp
</td><td style="text-align:right;">
-0.019
</td><td style="text-align:right;">
0.015
</td><td style="text-align:right;">
-1.275
</td><td style="text-align:right;">
0.213
</td></tr><tr><td style="text-align:left;">
cyl
</td><td style="text-align:right;">
-2.265
</td><td style="text-align:right;">
0.576
</td><td style="text-align:right;">
-3.933
</td><td style="text-align:right;">
0.000
</td></tr></tbody></table>
<p>Cleaning these tables up for publication can take some work. For example, we’d need to rename a bunch of fields to make this table have the labels we wanted (e.g., to turn <code>hp</code> into <code>Horsepower</code>).</p>
<p>We often need APA-formatted statistics to be printed in text, though. A good approach is to compute them first, and then print them inline. First, we’d run something like this:</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="B-rmarkdown.html#cb55-1" aria-hidden="true" tabIndex="-1"></a>ts <span class="ot">&lt;-</span> <span class="fu">with</span>(mtcars,<span class="fu">t.test</span>(hp[cyl<span class="sc">==</span><span class="dv">4</span>], hp[cyl<span class="sc">==</span><span class="dv">6</span>]))</span></code></pre></div>
<p>Then we’d print this:</p>
<blockquote>
<p>There’s a statistically-significant difference in horsepower for 4- and 6-cylinder cars (<span class="math inline">\(t(11.49) = -3.56\)</span>, <span class="math inline">\(p = 0.004\)</span>).</p>
</blockquote>
<p>We did this via an inline code block: <code>round(ts$parameter, 2)</code>.<label for="tufte-sn-264" class="margin-toggle sidenote-number">264</label><input type="checkbox" id="tufte-sn-264" class="margin-toggle"/><span class="sidenote"><span class="sidenote-number">264</span> APA would require omission of the leading zero. <code>papaja::printp()</code> will let you do that, see below.</span></p>
<p>Rounding <span class="math inline">\(p\)</span> values can occasionally get you in trouble. It’s very easy to have an output of <span class="math inline">\(p = 0\)</span> when in fact <span class="math inline">\(p\)</span> can never be exactly equal to 0. Nonetheless, this can help you prevent the kinds of rounding errors that would get picked up by software like <code>statcheck</code>.</p>
</div>
</div>
<div id="writing-apa-format-papers" class="section level2" number="19.5">
<h2><span class="header-section-number">B.5</span> Writing APA-format papers</h2>
<p>The end-game of reproducible research is to knit your entire paper into a submittable APA-style writeup. Managing APA format is a pain in the best of times. The <code>papaja</code> package allows you to circumvent this task by rendering your manuscript directly from R Markdown.<label for="tufte-sn-265" class="margin-toggle sidenote-number">265</label><input type="checkbox" id="tufte-sn-265" class="margin-toggle"/><span class="sidenote"><span class="sidenote-number">265</span> Thanks to <a href="https://github.com/crsh">Frederick Aust</a> for contributing much of the code in this section! For a bit more on <code>papaja</code>, check out <a href="https://rpubs.com/YaRrr/papaja_guide">this guide</a>.</span></p>




<p><code>papaja</code> has not yet been released on CRAN but you can install it from GitHub.</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="B-rmarkdown.html#cb56-1" aria-hidden="true" tabIndex="-1"></a><span class="co"># Install devtools package if necessary</span></span>
<span id="cb56-2"><a href="B-rmarkdown.html#cb56-2" aria-hidden="true" tabIndex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="st">&quot;devtools&quot;</span> <span class="sc">%in%</span> <span class="fu">rownames</span>(<span class="fu">installed.packages</span>())) <span class="fu">install.packages</span>(<span class="st">&quot;devtools&quot;</span>)</span>
<span id="cb56-3"><a href="B-rmarkdown.html#cb56-3" aria-hidden="true" tabIndex="-1"></a></span>
<span id="cb56-4"><a href="B-rmarkdown.html#cb56-4" aria-hidden="true" tabIndex="-1"></a><span class="co"># Install papaja</span></span>
<span id="cb56-5"><a href="B-rmarkdown.html#cb56-5" aria-hidden="true" tabIndex="-1"></a>devtools<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;crsh/papaja&quot;</span>)</span></code></pre></div>
<p>The APA manuscript template should now be available through the RStudio menus when creating a new R Markdown file.</p>
<p>When you click RStudio’s <em>Knit</em> button <code>papaja</code>, <code>rmarkdown,</code> and <code>knitr</code> work together to create an APA conform manuscript that includes both your manuscript text and the results of any embedded R code.</p>





<div island></div>
</div>
<div id="bibiographic-management" class="section level2" number="19.6">
<h2><span class="header-section-number">B.6</span> Bibiographic management</h2>
<p>Managing a bibliography by hand is a lot of work. Letting software do this for you is much easier. In R Markdown it’s possible to include references using <code>bibtex</code>, by using <code>@ref</code> syntax. You can do this in <code>papaja</code> but it’s also possible to o it in other packages that have some kind of bibliographic handling.</p>
<p>It’s simple. You put together a set of paper citations in a bibtex file – then when you refer to them in text, the citations pop up formatted correctly, and they are also put in your bibliography. As an example, <code>@nuijten2016</code> results in the in text citation “<span class="citation">Nuijten et al. (<a href="#ref-nuijten2016" role="doc-biblioref">2016</a>)</span>”, or cite them parenthetically with <code>[@nuijten2016]</code> <span class="citation">(<a href="#ref-nuijten2016" role="doc-biblioref">Nuijten et al. 2016</a>)</span>. Take a look at the <code>papaja</code> APA example to see how this works.</p>
<p>How do you make your bibtex file? You can do it by hand but this is a pain. One option for managing references is <a href="https://bibdesk.sourceforge.net/">bibdesk</a>, which integrates with google scholar.<label for="tufte-sn-266" class="margin-toggle sidenote-number">266</label><input type="checkbox" id="tufte-sn-266" class="margin-toggle"/><span class="sidenote"><span class="sidenote-number">266</span> Many other options are possible. For example, some of us use Zotero frequently as well.</span>
<code>citr</code> is an R package that provides an easy-to-use <a href="https://rstudio.github.io/rstudioaddins/">RStudio addin</a> that facilitates inserting citations.
The addin will automatically look up the Bib(La)TeX-file(s) specified in the YAML front matter.
The references for the inserted citations are automatically added to the documents reference section. Once <code>citr</code> is installed (<code>install.packages(&quot;citr&quot;)</code>) and you have restarted your R session, the addin appears in the menus and you can define a <a href="https://rstudio.github.io/rstudioaddins/#keyboard-shorcuts">keyboard shortcut</a> to call the addin.</p>
</div>
<div id="collaboration" class="section level2" number="19.7">
<h2><span class="header-section-number">B.7</span> Collaboration</h2>
<p>How do we collaborate using R Markdown? There are lots of different workflows that people use. Here are a few:</p>
<ul>
<li>The lead author makes a github repository with the markdown-formatted document in it. Others read the PDF and send text comments or PDF annotations and the lead makes modifications accordingly.<label for="tufte-sn-267" class="margin-toggle sidenote-number">267</label><input type="checkbox" id="tufte-sn-267" class="margin-toggle"/><span class="sidenote"><span class="sidenote-number">267</span> Dropbox has good PDF annotation tools for writing comments on specific lines of text.</span> This workflow works well when the lead author is relatively experienced and wants to keep control of the manuscript without too much line-by-line rewriting.</li>
<li>The lead author makes a repository as above, but co-authors collaborate either by pushing changes to master or by creating pull requests. This workflow works well when the authors are all fairly git-savvy, and can be great for quickly writing different parts in parallel because of git’s automatic merging.<label for="tufte-sn-268" class="margin-toggle sidenote-number">268</label><input type="checkbox" id="tufte-sn-268" class="margin-toggle"/><span class="sidenote"><span class="sidenote-number">268</span> We wrote this book using the all-github workflow, and it was pretty good, modulo some merge conflicts.</span></li>
<li>The authors work collaboratively together in an editor like Google Docs, Word, or Overleaf. (We favor cloud platforms rather than emailing back and forth, for all the reasons discussed in Chapter <a href="13-management.html#management">13</a>). Once the substantive text sections have converged, the lead author puts that text back into the markdown document and adds references. This workflow is good for very collaborative introduction writing when co-authors don’t use git or markdown. This workflow is a little clunky, but not too bad. And critically, all the figures and numbers get rendered fresh when you re-knit, so nothing can get accidentally altered during the editing process.</li>
<li>The lead author renders the results section from markdown, then writes text in the resulting Word document (or uploads it to Google Docs). This workflow is closest to the “old way” that many people are used to, but runs the biggest risk of errors getting introduced and propagated forward, since it’s not possible to rerender the whole document from scratch. If someone makes changes to the results section, it’s critical to propagate these back to the markdown and keep the two in sync.</li>
</ul>
<p>In sum, there are lots of ways to collaborate – the best thing is to talk with your co-authors to select one that works for the group.</p>
</div>
<div id="r-markdown-chapter-summary" class="section level2" number="19.8">
<h2><span class="header-section-number">B.8</span> R Markdown: Chapter summary</h2>
<p>R Markdown is a great way to write reproducible papers. It is not too tricky to learn, and once you master it you can save time by reformatting quickly and automatically, managing your bibliography automatically, and even creating nice web-compatible documents.</p>


</div>
</div>
<h3>References</h3>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-nuijten2016" class="csl-entry">
Nuijten, Michèle B, Chris H J Hartgerink, Marcel A L M van Assen, Sacha Epskamp, and Jelte M Wicherts. 2016. <span>“The Prevalence of Statistical Reporting Errors in Psychology (1985–2013).”</span> <em>Behav. Res. Methods</em> 48 (4): 1205–26.
</div>
</div>
<p style="text-align:center;">
<a href="A-git.html"><button class="btn btn-default">Previous</button></a>
<a href="C-tidyverse.html"><button class="btn btn-default">Next</button></a>
</p>
</div>
</div>



<script type="module" src="/assets/entries/entry-server-routing.04d1a977.js" defer></script><link rel="modulepreload" href="/assets/entries/src_index.page.client.bea4ffd1.js" as="script" type="text/javascript"><link rel="modulepreload" href="/assets/chunks/chunk-078aa1fb.js" as="script" type="text/javascript"><script id="vite-plugin-ssr_pageContext" type="application/json">{"pageContext":{"_pageId":"/src/index","islands":[{"name":"TOC","props":{"name":"Experimentology: An Open Science Approach to Experimental Psychology Methods","items":[{"name":"Foundations","items":[{"name":"Experiments","href":"1-experiments"},{"name":"Theories","href":"2-theories"},{"name":"Replication","href":"3-replication"},{"name":"Ethics","href":"4-ethics"}]},{"name":"Statistics","items":[{"name":"Estimation","href":"5-estimation"},{"name":"Inference","href":"6-inference"},{"name":"Models","href":"7-models"}]},{"name":"Design","items":[{"name":"Measurement","href":"8-measurement"},{"name":"Design","href":"9-design"},{"name":"Sampling","href":"10-sampling"}]},{"name":"Execution","items":[{"name":"Preregistration","href":"11-prereg"},{"name":"Data collection","href":"12-collection"},{"name":"Project management","href":"13-management"}]},{"name":"Reporting","items":[{"name":"Writing","href":"14-writing"},{"name":"Visualization","href":"15-viz"},{"name":"Meta-analysis","href":"16-meta"},{"name":"Conclusions","href":"17-conclusions"}]},{"name":"Appendices","items":[{"name":"GitHub","href":"A-git"},{"name":"R Markdown","href":"B-rmarkdown"},{"name":"Tidyverse","href":"C-tidyverse"},{"name":"ggplot","href":"D-ggplot"},{"name":"Instructor’s guide","href":"E-instructors"}]}]}},{"name":"Box","props":{"children":["\n",{"type":"ul","props":{"children":["\n",{"type":"li","props":{"children":"Explain what Markdown is and how the syntax works,"},"key":1,"ref":"!undefined","__k":null,"__":null,"__b":0,"__e":null,"__d":"!undefined","__c":null,"__h":null,"constructor":"!undefined","__v":11744},"\n",{"type":"li","props":{"children":"Practice how to integrate code and data in R Markdown,"},"key":3,"ref":"!undefined","__k":null,"__":null,"__b":0,"__e":null,"__d":"!undefined","__c":null,"__h":null,"constructor":"!undefined","__v":11745},"\n",{"type":"li","props":{"children":"Understand the different output formats from R Markdown and how to generate them"},"key":5,"ref":"!undefined","__k":null,"__":null,"__b":0,"__e":null,"__d":"!undefined","__c":null,"__h":null,"constructor":"!undefined","__v":11746},"\n",{"type":"li","props":{"children":["Know about generating APA format files with ",{"type":"code","props":{"children":"papaja"},"key":1,"ref":"!undefined","__k":null,"__":null,"__b":0,"__e":null,"__d":"!undefined","__c":null,"__h":null,"constructor":"!undefined","__v":11747}," and bibtex"]},"key":7,"ref":"!undefined","__k":null,"__":null,"__b":0,"__e":null,"__d":"!undefined","__c":null,"__h":null,"constructor":"!undefined","__v":11748},"\n"]},"key":1,"ref":"!undefined","__k":null,"__":null,"__b":0,"__e":null,"__d":"!undefined","__c":null,"__h":null,"constructor":"!undefined","__v":11749},"\n"],"className":"box","data-box":"learning_goals"}},{"name":"Box","props":{"children":["\n",{"type":"p","props":{"children":"Knit the R Markdown template to Word and PDF to ensure that you can get this to work. Isn’t it gratifying?"},"key":1,"ref":"!undefined","__k":null,"__":null,"__b":0,"__e":null,"__d":"!undefined","__c":null,"__h":null,"constructor":"!undefined","__v":11771},"\n"],"className":"box","data-box":"exercises"}},{"name":"Box","props":{"children":["\n",{"type":"ol","props":{"style":{"listStyleType":"decimal"},"children":["\n",{"type":"li","props":{"children":{"type":"p","props":{"children":"Outlining using headings is a really great way to keep things organized! Try making a bunch of headings, and then recompiling your document."},"key":"!undefined","ref":"!undefined","__k":null,"__":null,"__b":0,"__e":null,"__d":"!undefined","__c":null,"__h":null,"constructor":"!undefined","__v":11932}},"key":1,"ref":"!undefined","__k":null,"__":null,"__b":0,"__e":null,"__d":"!undefined","__c":null,"__h":null,"constructor":"!undefined","__v":11933},"\n",{"type":"li","props":{"children":{"type":"p","props":{"children":["To show off your headings from the previous exercise, add a table of contents. Go to the header of the document (the ",{"type":"code","props":{"children":"YAML"},"key":1,"ref":"!undefined","__k":null,"__":null,"__b":0,"__e":null,"__d":"!undefined","__c":null,"__h":null,"constructor":"!undefined","__v":11934},"), and add some options to the ",{"type":"code","props":{"children":"html document"},"key":3,"ref":"!undefined","__k":null,"__":null,"__b":0,"__e":null,"__d":"!undefined","__c":null,"__h":null,"constructor":"!undefined","__v":11935}," bit. You want it to look like this (indentation must to be correct):"]},"key":"!undefined","ref":"!undefined","__k":null,"__":null,"__b":0,"__e":null,"__d":"!undefined","__c":null,"__h":null,"constructor":"!undefined","__v":11936}},"key":3,"ref":"!undefined","__k":null,"__":null,"__b":0,"__e":null,"__d":"!undefined","__c":null,"__h":null,"constructor":"!undefined","__v":11937},"\n"]},"key":1,"ref":"!undefined","__k":null,"__":null,"__b":0,"__e":null,"__d":"!undefined","__c":null,"__h":null,"constructor":"!undefined","__v":11938},"\n",{"type":"div","props":{"className":"sourceCode","id":"cb51","children":{"type":"pre","props":{"className":"sourceCode yaml","children":{"type":"code","props":{"className":"sourceCode yaml","children":[{"type":"span","props":{"id":"cb51-1","children":[{"type":"a","props":{"href":"B-rmarkdown.html#cb51-1","aria-hidden":"true","tabIndex":"-1","children":null},"key":0,"ref":"!undefined","__k":null,"__":null,"__b":0,"__e":null,"__d":"!undefined","__c":null,"__h":null,"constructor":"!undefined","__v":11939},{"type":"span","props":{"className":"fu","children":"output"},"key":1,"ref":"!undefined","__k":null,"__":null,"__b":0,"__e":null,"__d":"!undefined","__c":null,"__h":null,"constructor":"!undefined","__v":11940},{"type":"span","props":{"className":"kw","children":":"},"key":2,"ref":"!undefined","__k":null,"__":null,"__b":0,"__e":null,"__d":"!undefined","__c":null,"__h":null,"constructor":"!undefined","__v":11941},{"type":"span","props":{"className":"at","children":" "},"key":3,"ref":"!undefined","__k":null,"__":null,"__b":0,"__e":null,"__d":"!undefined","__c":null,"__h":null,"constructor":"!undefined","__v":11942}]},"key":0,"ref":"!undefined","__k":null,"__":null,"__b":0,"__e":null,"__d":"!undefined","__c":null,"__h":null,"constructor":"!undefined","__v":11943},"\n",{"type":"span","props":{"id":"cb51-2","children":[{"type":"a","props":{"href":"B-rmarkdown.html#cb51-2","aria-hidden":"true","tabIndex":"-1","children":null},"key":0,"ref":"!undefined","__k":null,"__":null,"__b":0,"__e":null,"__d":"!undefined","__c":null,"__h":null,"constructor":"!undefined","__v":11944},{"type":"span","props":{"className":"at","children":"  "},"key":1,"ref":"!undefined","__k":null,"__":null,"__b":0,"__e":null,"__d":"!undefined","__c":null,"__h":null,"constructor":"!undefined","__v":11945},{"type":"span","props":{"className":"fu","children":"html_document"},"key":2,"ref":"!undefined","__k":null,"__":null,"__b":0,"__e":null,"__d":"!undefined","__c":null,"__h":null,"constructor":"!undefined","__v":11946},{"type":"span","props":{"className":"kw","children":":"},"key":3,"ref":"!undefined","__k":null,"__":null,"__b":0,"__e":null,"__d":"!undefined","__c":null,"__h":null,"constructor":"!undefined","__v":11947}]},"key":2,"ref":"!undefined","__k":null,"__":null,"__b":0,"__e":null,"__d":"!undefined","__c":null,"__h":null,"constructor":"!undefined","__v":11948},"\n",{"type":"span","props":{"id":"cb51-3","children":[{"type":"a","props":{"href":"B-rmarkdown.html#cb51-3","aria-hidden":"true","tabIndex":"-1","children":null},"key":0,"ref":"!undefined","__k":null,"__":null,"__b":0,"__e":null,"__d":"!undefined","__c":null,"__h":null,"constructor":"!undefined","__v":11949},{"type":"span","props":{"className":"at","children":"    "},"key":1,"ref":"!undefined","__k":null,"__":null,"__b":0,"__e":null,"__d":"!undefined","__c":null,"__h":null,"constructor":"!undefined","__v":11950},{"type":"span","props":{"className":"fu","children":"toc"},"key":2,"ref":"!undefined","__k":null,"__":null,"__b":0,"__e":null,"__d":"!undefined","__c":null,"__h":null,"constructor":"!undefined","__v":11951},{"type":"span","props":{"className":"kw","children":":"},"key":3,"ref":"!undefined","__k":null,"__":null,"__b":0,"__e":null,"__d":"!undefined","__c":null,"__h":null,"constructor":"!undefined","__v":11952},{"type":"span","props":{"className":"at","children":" "},"key":4,"ref":"!undefined","__k":null,"__":null,"__b":0,"__e":null,"__d":"!undefined","__c":null,"__h":null,"constructor":"!undefined","__v":11953},{"type":"span","props":{"className":"ch","children":"true"},"key":5,"ref":"!undefined","__k":null,"__":null,"__b":0,"__e":null,"__d":"!undefined","__c":null,"__h":null,"constructor":"!undefined","__v":11954}]},"key":4,"ref":"!undefined","__k":null,"__":null,"__b":0,"__e":null,"__d":"!undefined","__c":null,"__h":null,"constructor":"!undefined","__v":11955}]},"key":"!undefined","ref":"!undefined","__k":null,"__":null,"__b":0,"__e":null,"__d":"!undefined","__c":null,"__h":null,"constructor":"!undefined","__v":11956}},"key":"!undefined","ref":"!undefined","__k":null,"__":null,"__b":0,"__e":null,"__d":"!undefined","__c":null,"__h":null,"constructor":"!undefined","__v":11957}},"key":3,"ref":"!undefined","__k":null,"__":null,"__b":0,"__e":null,"__d":"!undefined","__c":null,"__h":null,"constructor":"!undefined","__v":11958},"\n"],"className":"box","data-box":"exercises"}},{"name":"Box","props":{"children":["\n",{"type":"p","props":{"children":["Using the ",{"type":"code","props":{"children":"mtcars"},"key":1,"ref":"!undefined","__k":null,"__":null,"__b":0,"__e":null,"__d":"!undefined","__c":null,"__h":null,"constructor":"!undefined","__v":12101}," dataset, insert a table and a graph of your choice into your R Markdown template document. If you’re feeling uninspired, try ",{"type":"code","props":{"children":"hist(mtcars$mpg)"},"key":3,"ref":"!undefined","__k":null,"__":null,"__b":0,"__e":null,"__d":"!undefined","__c":null,"__h":null,"constructor":"!undefined","__v":12102},"."]},"key":1,"ref":"!undefined","__k":null,"__":null,"__b":0,"__e":null,"__d":"!undefined","__c":null,"__h":null,"constructor":"!undefined","__v":12103},"\n"],"className":"box","data-box":"exercises"}},{"name":"Box","props":{"children":["\n",{"type":"p","props":{"children":["Make sure you’ve got ",{"type":"code","props":{"children":"papaja"},"key":1,"ref":"!undefined","__k":null,"__":null,"__b":0,"__e":null,"__d":"!undefined","__c":null,"__h":null,"constructor":"!undefined","__v":12235},", then open a new APA template file. Compile this document, and look at how awesome it is. Try pasting in your figure and table from your other R Markdown (don’t forget any libraries you need to make it compile)."]},"key":1,"ref":"!undefined","__k":null,"__":null,"__b":0,"__e":null,"__d":"!undefined","__c":null,"__h":null,"constructor":"!undefined","__v":12236},"\n"],"className":"box","data-box":"exercises"}}]}}</script></body></html>
